{"file":"stock-price.js","mappings":"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","names":["StockPrice"],"sources":["src/global/global.ts","src/components/stock-price/stock-price.css?tag=stock-price&encapsulation=shadow","src/components/stock-price/stock-price.tsx"],"sourcesContent":["export const AV_API_KEY = 'QKAB4FFTVDRXG1P4';",":host {\n  display: block;\n  border: 2px solid purple;\n  margin: 2rem;\n  padding: 1rem;\n  width: 20rem;\n  max-width: 100%;\n}\n\nform input {\n  font: inherit;\n  color: purple;\n  padding: .15rem .25rem;\n  display: block;\n  margin-bottom: .5rem;\n}\n\nform input:focus, form button:focus {\n  outline: none;\n}\n\nform button {\n  font: inherit;\n  padding: .25rem .5rem;\n  border: 1px solid purple;\n  background: purple;\n  color: white;\n  cursor: pointer;\n}\n\nform button:hover, form button:active {\n  background: rgb(189, 3, 189);\n  border-color: rgb(189, 3, 189);\n}\n\nform button:disabled {\n  background: #ccc;\n  border-color: #ccc;\n  color: white;\n  cursor: not-allowed;\n}","import { Component, Prop, State, Watch, h } from '@stencil/core';\n\nimport {AV_API_KEY} from '../../global/global'\n\n@Component({\n  tag: 'stock-price',\n  styleUrl: 'stock-price.css',\n  shadow: true,\n})\nexport class StockPrice {\n  stockInput: HTMLInputElement;\n  // initialStockSymbole: string;\n  // @Element() el: HTMLElement;\n  @State() fetchedPrice: number;\n  @State() stockUserInput: string;\n  @State() stockInputValid = false;\n  @State() error: string;\n\n  @Prop({mutable: true, reflect: true}) stockSymbol: string;\n\n  @Watch('stockSymbol')\n  stockSymbolChanged(newValue: string, oldValue: string) {\n    if (newValue !== oldValue) {\n      this.stockUserInput = newValue;\n      this.fetchStockPrice(newValue);\n    }\n  }\n\n  onUserInput(event: Event) {\n    this.stockUserInput = (event.target as HTMLInputElement).value;\n    if (this.stockUserInput.trim() !== '') this.stockInputValid = true;\n    else this.stockInputValid = false;\n  }\n\n  onFetchStockPrice(event: Event) {\n    event.preventDefault();\n    // const stockSymbol = (this.el.shadowRoot.querySelector('#stock-symbol') as HTMLInputElement).value;\n    // const stockSymbol = this.stockInput.value;\n    this.stockSymbol = this.stockInput.value;\n    // this.fetchStockPrice(stockSymbol);\n  }\n\n  componentWillLoad() {\n    console.log('commponentWillLoad');\n    console.log(this.stockSymbol);\n    // this.fetchedPrice = 0;\n  }\n\n  componentDidLoad() {\n    console.log('componentDidLoad');\n    if (this.stockSymbol) {\n      // this.initialStockSymbole = this.stockSymbol;\n      this.stockUserInput = this.stockSymbol;\n      this.stockInputValid = true;\n      this.fetchStockPrice(this.stockSymbol);\n    }\n  }\n\n  componentWillUpdate() {\n    console.log('compoenntWillUpdate');\n  }\n\n  componentDidUpdate() {\n    console.log('componentDidUpdate');\n    // if (this.stockSymbol !== this.initialStockSymbole) {\n    //   this.initialStockSymbole = this.stockSymbol;\n    //   this.fetchStockPrice(this.stockSymbol);\n    // }\n  }\n\n  disconnectedCallback() {\n    console.log('disconnectedCallback');\n  }\n\n  fetchStockPrice(stockSymbol: string) {\n    fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${stockSymbol}&apikey=${AV_API_KEY}`)\n    .then((res) => {\n      if (res.status !== 200) {\n        throw new Error('Invalid!');\n      }\n      return res.json();\n    })\n    .then((parsedRes)=> {\n      if (!parsedRes['Global Quote']['05. price']) {\n        throw new Error('Invalid symbol!');\n      }\n      this.error = null;\n      this.fetchedPrice = +parsedRes['Global Quote']['05. price'];\n    })\n    .catch((e) => this.error = e.message);\n  }\n\n  render() {\n    let dataContent = <p>Please enter a symbol</p>;\n    if (this.error) {\n      dataContent = <p>{this.error}</p>\n    }\n    if (this.fetchedPrice) {\n      dataContent = <p>Price: ${this.fetchedPrice}</p>\n    }\n    return (\n      [\n        <form onSubmit={this.onFetchStockPrice.bind(this)}>\n          <input\n            id=\"stock-symbol\"\n            ref={(el) => this.stockInput = el}\n            value={this.stockUserInput}\n            onInput={this.onUserInput.bind(this)} />\n          <button type=\"submit\" disabled={!this.stockInputValid}>Fetch</button>\n        </form>,\n        <div>\n          {dataContent}\n        </div>\n      ]\n    );\n  }\n\n}\n"],"version":3}